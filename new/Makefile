FLAG = -pthread -Wall -Wextra -Werror -std=c++98 -g -fsanitize=address
SRCS = main.cpp
OBJS = $(patsubst %.cpp,bin/%.o,$(SRCS))
NAME = webserv

RED	:=	\033[1;31m
GRE	:=	\033[1;32m
GRA	:=	\033[1;37m
BLU	:=	\033[1;34m
EOC	:=	\033[0m

HEADER_FILES 		= Autoindex.hpp
FOLDER_HEADER		= src/

HEADERS				= $(addprefix ${FOLDER_HEADER},${HEADER_FILES})

bin/%.o: src/%.cpp ${HEADERS}
	@printf "$(BLU)‚óè Compiling $< üîß$(EOC)\n"
	@mkdir -p bin
	@clang++ $(FLAG) -c $< -o $@
all: $(NAME)
$(NAME): $(OBJS)
	@printf "$(GRE)‚óè Compiling $(NAME) ‚öôÔ∏è $(EOC)\n"
	@clang++ $(FLAG) $(OBJS) -o $(NAME)
	@printf "$(GRE)‚óè done. ‚úÖ $(EOC)\n"
run: all
	./$(NAME)
clean:
	@printf "$(RED)‚óè Removing objects üìÅ$(EOC)\n"
	@rm -rf bin
fclean: clean
	@printf "$(RED)‚óè Removing binary ‚öôÔ∏è $(EOC)\n"
	@rm -rf $(NAME)
re: fclean all

.PHONY: all run clean fclean re