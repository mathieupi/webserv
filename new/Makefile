FLAG = -pthread -Wall -Wextra -Werror -std=c++98 -g -fsanitize=address
SRCS = main.cpp
OBJS = $(patsubst %.cpp,bin/%.o,$(SRCS))
NAME = webserv

RED	:=	\033[1;31m
GRE	:=	\033[1;32m
GRA	:=	\033[1;37m
BLU	:=	\033[1;34m
EOC	:=	\033[0m

bin/%.o: src/%.cpp
	@echo -e "$(BLU)‚óè Compiling $^ üîß$(EOC)"
	@mkdir -p bin
	@clang++ $(FLAG) -c $^ -o $@
all: $(NAME)
$(NAME): $(OBJS)
	@echo -e "$(GRE)‚óè Compiling $(NAME) ‚öôÔ∏è $(EOC)"
	@clang++ $(FLAG) $(OBJS) -o $(NAME)
	@echo -e "$(GRE)‚óè done. ‚úÖ $(EOC)"
run: all
	./$(NAME)
clean:
	@echo -e "$(RED)‚óè Removing objects üìÅ$(EOC)"
	@rm -rf bin
fclean: clean
	@echo -e "$(RED)‚óè Removing binary ‚öôÔ∏è $(EOC)"
	@rm -rf $(NAME)
re: fclean all

.PHONY: all run clean fclean re